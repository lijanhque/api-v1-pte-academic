"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MotiaEnrichmentPlugin = void 0;
const os_1 = __importDefault(require("os"));
class MotiaEnrichmentPlugin {
    constructor() {
        this.name = 'motia-enrichment';
        this.type = 'enrichment';
    }
    async setup() {
        return;
    }
    async execute(event) {
        event.app_version = process.env.npm_package_version || 'unknown';
        if (!event.extra) {
            event.extra = {};
        }
        event.extra.motia_version = process.env.npm_package_dependencies_motia || 'unknown';
        event.extra.source = 'backend';
        event.os_name = os_1.default.platform() === 'darwin' ? 'macOS' : os_1.default.platform() === 'win32' ? 'Windows' : 'Linux';
        event.os_version = os_1.default.release();
        event.platform = os_1.default.platform();
        event.device_model = os_1.default.type();
        event.device_manufacturer = os_1.default.machine();
        event.device_brand = os_1.default.platform() === 'darwin' ? 'Apple' : os_1.default.platform() === 'win32' ? 'Microsoft' : 'Unknown';
        return event;
    }
}
exports.MotiaEnrichmentPlugin = MotiaEnrichmentPlugin;
