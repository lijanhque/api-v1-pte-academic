"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const commander_1 = require("commander");
const build_validation_1 = require("../build/build-validation");
const config_utils_1 = require("../config-utils");
const build_1 = require("../new-deployment/build");
const cli_listener_1 = require("../new-deployment/listeners/cli-listener");
commander_1.program
    .command('build')
    .description('Build the project')
    .action((0, config_utils_1.handler)(async (_, context) => {
    const listener = new cli_listener_1.CliListener(context);
    const builder = await (0, build_1.build)(listener);
    const isValid = (0, build_validation_1.buildValidation)(builder, listener);
    if (!isValid) {
        process.exit(1);
    }
    context.log('build-completed', (message) => message.tag('success').append('Build completed'));
}));
