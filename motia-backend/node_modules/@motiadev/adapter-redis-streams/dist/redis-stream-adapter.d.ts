import type { BaseStreamItem, StateStreamEvent, StateStreamEventChannel } from '@motiadev/core';
import { StreamAdapter, type StreamQueryFilter } from '@motiadev/core';
import { type RedisClientType } from 'redis';
import type { RedisStreamAdapterConfig } from './types';
export declare class RedisStreamAdapter<TData> extends StreamAdapter<TData> {
    private client;
    private subClient?;
    private keyPrefix;
    private groupPrefix;
    private subscriptions;
    constructor(streamName: string, config: RedisStreamAdapterConfig, sharedClient: RedisClientType);
    private makeGroupKey;
    private makeChannelKey;
    get(groupId: string, id: string): Promise<BaseStreamItem<TData> | null>;
    set(groupId: string, id: string, data: TData): Promise<BaseStreamItem<TData>>;
    delete(groupId: string, id: string): Promise<BaseStreamItem<TData> | null>;
    getGroup(groupId: string): Promise<BaseStreamItem<TData>[]>;
    send<T>(channel: StateStreamEventChannel, event: StateStreamEvent<T>): Promise<void>;
    subscribe<T>(channel: StateStreamEventChannel, handler: (event: StateStreamEvent<T>) => void | Promise<void>): Promise<void>;
    unsubscribe(channel: StateStreamEventChannel): Promise<void>;
    clear(groupId: string): Promise<void>;
    query(groupId: string, filter: StreamQueryFilter<TData>): Promise<BaseStreamItem<TData>[]>;
    cleanup(): Promise<void>;
}
//# sourceMappingURL=redis-stream-adapter.d.ts.map