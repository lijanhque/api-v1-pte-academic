import { jsx as _jsx } from "react/jsx-runtime";
import { useStreamItem } from '@motiadev/stream-client-react';
import { ReactFlowProvider } from '@xyflow/react';
import { memo, useMemo } from 'react';
import { useFlowStore } from '@/stores/use-flow-store';
import { FlowView } from './flow-view';
export const FlowPage = memo(() => {
    const selectedFlowId = useFlowStore((state) => state.selectedFlowId);
    const streamItemArgs = useMemo(() => ({ streamName: '__motia.flows', groupId: 'default', id: selectedFlowId ?? '' }), [selectedFlowId]);
    const { data: flow } = useStreamItem(streamItemArgs);
    const streamItemArgsConfig = useMemo(() => ({ streamName: '__motia.flowsConfig', groupId: 'default', id: selectedFlowId ?? '' }), [selectedFlowId]);
    const { data: flowConfig } = useStreamItem(streamItemArgsConfig);
    if (!flow || flow.error)
        return (_jsx("div", { className: "w-full h-full bg-background flex flex-col items-center justify-center", children: _jsx("p", { children: flow?.error }) }));
    return (_jsx(ReactFlowProvider, { children: _jsx(FlowView, { flow: flow, flowConfig: flowConfig }) }));
});
FlowPage.displayName = 'FlowPage';
