import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '@motiadev/ui';
import { ChevronsUpDown, Workflow } from 'lucide-react';
import { useShallow } from 'zustand/react/shallow';
import { useFetchFlows } from '@/hooks/use-fetch-flows';
import { motiaAnalytics } from '@/lib/motia-analytics';
import { useFlowStore } from '@/stores/use-flow-store';
export const FlowTabMenuItem = () => {
    useFetchFlows();
    const selectFlowId = useFlowStore((state) => state.selectFlowId);
    const flows = useFlowStore(useShallow((state) => Object.values(state.flows)));
    const selectedFlowId = useFlowStore((state) => state.selectedFlowId);
    if (flows.length === 0) {
        return null;
    }
    const handleFlowSelect = (flowId) => {
        selectFlowId(flowId);
        motiaAnalytics.track('flow_selected', { flow: flowId });
    };
    return (_jsxs("div", { className: "flex flex-row justify-center items-center gap-2 cursor-pointer", children: [_jsx(Workflow, {}), selectedFlowId ?? 'No flow selected', _jsxs(DropdownMenu, { children: [_jsx(DropdownMenuTrigger, { asChild: true, children: _jsx("div", { className: "flex flex-row justify-center items-center gap-2 cursor-pointer", "data-testid": "flows-dropdown-trigger", children: _jsx(ChevronsUpDown, { className: "size-4" }) }) }), _jsx(DropdownMenuContent, { className: "bg-background text-foreground flows-dropdown", children: flows.map((item) => (_jsx(DropdownMenuItem, { "data-testid": `dropdown-${item}`, className: "cursor-pointer gap-2 flow-link", onClick: () => handleFlowSelect(item), children: item }, `dropdown-${item}`))) })] })] }));
};
