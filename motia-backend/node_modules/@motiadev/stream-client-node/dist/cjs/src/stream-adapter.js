"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StreamSocketAdapter = void 0;
const ws_1 = require("ws");
class StreamSocketAdapter {
    constructor(address) {
        this.address = address;
        this.ws = new ws_1.WebSocket(this.address);
    }
    connect() { }
    send(message) {
        this.ws.send(message);
    }
    onMessage(callback) {
        const listener = (message) => callback(message.data.toString());
        this.ws.addEventListener('message', listener);
    }
    onOpen(callback) {
        this.ws.addEventListener('open', callback);
    }
    onClose(callback) {
        this.ws.addEventListener('close', callback);
    }
    close() {
        this.ws.close();
        this.ws.removeAllListeners();
    }
    isOpen() {
        return this.ws.readyState === ws_1.WebSocket.OPEN;
    }
}
exports.StreamSocketAdapter = StreamSocketAdapter;
