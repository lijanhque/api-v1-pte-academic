import type http from 'http';
import { Server as WsServer } from 'ws';
type BaseMessage = {
    streamName: string;
    groupId: string;
    id?: string;
};
type StreamEvent<TData> = {
    type: 'sync';
    data: TData;
} | {
    type: 'create';
    data: TData;
} | {
    type: 'update';
    data: TData;
} | {
    type: 'delete';
    data: TData;
} | {
    type: 'event';
    event: {
        type: string;
        data: any;
    };
};
type EventMessage<TData> = BaseMessage & {
    timestamp: number;
    event: StreamEvent<TData>;
};
type Props = {
    server: http.Server;
    onJoin: <TData>(streamName: string, groupId: string, id: string) => Promise<TData>;
    onJoinGroup: <TData>(streamName: string, groupId: string) => Promise<TData[] | undefined>;
};
export declare const createSocketServer: ({ server, onJoin, onJoinGroup }: Props) => {
    pushEvent: <TData>(message: Omit<EventMessage<TData>, "timestamp">) => void;
    socketServer: WsServer<typeof import("ws"), typeof http.IncomingMessage>;
};
export {};
//# sourceMappingURL=socket-server.d.ts.map