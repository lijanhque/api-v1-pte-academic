import type { RedisClientType } from 'redis';
import type { StreamAdapterManager } from './adapters/interfaces/stream-adapter-manager.interface';
import type { Printer } from './printer';
import type { StreamFactory } from './streams/stream-factory';
import type { ApiRouteConfig, CronConfig, EventConfig, Flow, Step } from './types';
import type { Stream } from './types-stream';
type FlowEvent = 'flow-created' | 'flow-removed' | 'flow-updated';
type StepEvent = 'step-created' | 'step-removed' | 'step-updated';
type StreamEvent = 'stream-created' | 'stream-removed' | 'stream-updated';
type StreamWrapper<TData> = (streamName: string, factory: StreamFactory<TData>) => StreamFactory<TData>;
export declare class LockedData {
    readonly baseDir: string;
    readonly streamAdapter: StreamAdapterManager;
    private readonly printer;
    readonly redisClient: RedisClientType;
    flows: Record<string, Flow>;
    activeSteps: Step[];
    devSteps: Step[];
    private stepsMap;
    private handlers;
    private stepHandlers;
    private streamHandlers;
    private streams;
    private streamWrapper?;
    constructor(baseDir: string, streamAdapter: StreamAdapterManager, printer: Printer, redisClient: RedisClientType);
    applyStreamWrapper<TData>(streamWrapper: StreamWrapper<TData>): void;
    saveTypes(): void;
    on(event: FlowEvent, handler: (flowName: string) => void): void;
    onStep(event: StepEvent, handler: (step: Step) => void): void;
    onStream(event: StreamEvent, handler: (stream: Stream) => void): void;
    getActiveSteps(): Step[];
    eventSteps(): Step<EventConfig>[];
    apiSteps(): Step<ApiRouteConfig>[];
    cronSteps(): Step<CronConfig>[];
    pythonSteps(): Step[];
    tsSteps(): Step[];
    getStreams(): Record<string, StreamFactory<any>>;
    listStreams(): Stream[];
    findStream(path: string): Stream | undefined;
    updateStep(oldStep: Step, newStep: Step, options?: {
        disableTypeCreation?: boolean;
    }): boolean;
    createStep(step: Step, options?: {
        disableTypeCreation?: boolean;
    }): boolean;
    deleteStep(step: Step, options?: {
        disableTypeCreation?: boolean;
    }): void;
    private createFactoryWrapper;
    createStream<TData>(baseStream: Omit<Stream, 'factory'>, options?: {
        disableTypeCreation?: boolean;
    }): StreamFactory<TData>;
    deleteStream(stream: Stream, options?: {
        disableTypeCreation?: boolean;
    }): void;
    updateStream(oldStream: Stream, stream: Stream, options?: {
        disableTypeCreation?: boolean;
    }): void;
    private createFlow;
    private removeFlow;
    private onFlowUpdated;
    private isValidStep;
    private createStreamAdapter;
}
export {};
//# sourceMappingURL=locked-data.d.ts.map