"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.analyticsEndpoint = void 0;
const utils_1 = require("../analytics/utils");
const analyticsEndpoint = (app, baseDir) => {
    app.get('/motia/analytics/user', (_req, res) => {
        const analyticsEnabled = (0, utils_1.isAnalyticsEnabled)();
        if (!analyticsEnabled) {
            res.json({
                userId: null,
                projectId: null,
                motiaVersion: null,
                analyticsEnabled: false,
            });
            return;
        }
        res.json({
            userId: (0, utils_1.getUserIdentifier)(),
            projectId: (0, utils_1.getProjectIdentifier)(baseDir),
            motiaVersion: process.env.npm_package_dependencies_motia || 'unknown',
            analyticsEnabled: true,
        });
    });
    app.get('/motia/analytics/status', (_req, res) => {
        res.json({ analyticsEnabled: (0, utils_1.isAnalyticsEnabled)() });
    });
};
exports.analyticsEndpoint = analyticsEndpoint;
